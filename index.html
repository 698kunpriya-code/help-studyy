
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö ‡πÅ‡∏≠‡∏õ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ + ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (Colab)</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .colab-notice {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            margin: 10px 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
        }
        .tabs {
            display: flex;
            background: #f7fafc;
            border-bottom: 2px solid #e2e8f0;
        }
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab.active {
            background: white;
            color: #4a5568;
            font-weight: bold;
            border-bottom: 3px solid #48bb78;
        }
        .tab-content {
            display: none;
            padding: 30px;
        }
        .tab-content.active {
            display: block;
        }
        form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 15px;
            margin-bottom: 20px;
        }
        input, textarea, select {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: border 0.3s;
            width: 100%;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #48bb78;
        }
        button {
            background: linear-gradient(45deg, #48bb78, #38a169);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }
        button:hover:not(:disabled) {
            transform: translateY(-2px);
        }
        button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }
        .plan-list, .summary-list {
            display: grid;
            gap: 15px;
        }
        .plan-card, .summary-card {
            background: #f7fafc;
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid #48bb78;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        .plan-card h3, .summary-card h3 {
            color: #4a5568;
            margin-bottom: 10px;
        }
        .progress {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-bar {
            background: linear-gradient(90deg, #48bb78, #38a169);
            height: 100%;
            transition: width 0.3s;
            border-radius: 4px;
        }
        .summary-text {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #ed8936;
            margin-top: 10px;
            white-space: pre-wrap;
            line-height: 1.6;
            max-height: 300px;
            overflow-y: auto;
        }
        .btn-group {
            margin-top: 15px;
        }
        .delete-btn {
            background: #f56565;
            padding: 8px 15px;
            font-size: 14px;
            margin-right: 10px;
        }
        .update-btn {
            background: #ed8936;
            padding: 8px 15px;
            font-size: 14px;
        }
        @media (max-width: 768px) {
            form { grid-template-columns: 1fr; }
            .tabs { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö ‡πÅ‡∏≠‡∏õ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ + ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤</h1>
            <p>‡πÉ‡∏´‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ |  ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô  </p>
        </div>

        <div class="colab-notice">

        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab(event, 'plan')">üìÖ ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</button>
            <button class="tab" onclick="switchTab(event, 'summary')">‚ú® ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ AI</button>
        </div>

        <div id="plan" class="tab-content active">
            <form id="planForm">
                <input type="text" id="bookTitle" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠/‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏∑‡∏ä‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡πà‡∏≠‡∏•‡∏≥‡πÄ‡∏•‡∏µ‡∏¢‡∏á)" required>
                <input type="number" id="pages" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î" min="1" required>
                <input type="date" id="startDate" required>
                <input type="number" id="dailyPages" placeholder="‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô" min="1" required>
                <button type="submit">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô</button>
            </form>
            <div class="plan-list" id="planList"></div>
        </div>

        <div id="summary" class="tab-content">
            <form id="summaryForm">
                <textarea id="contentText" placeholder="‡∏ß‡∏≤‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...&#10;(‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÑ‡∏•‡πÇ‡∏Ñ‡πÑ‡∏ü‡∏ï‡πå vs ‡∏¢‡∏π‡∏ü‡∏¥‡∏•‡πÇ‡∏•‡πÑ‡∏ü‡∏ï‡πå)" rows="5" required></textarea>
                <select id="summaryType">
                    <option value="short">‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏±‡πâ‡∏ô (3-5 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</option>
                    <option value="medium">‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏•‡∏≤‡∏á (1 ‡∏¢‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤)</option>
                    <option value="detailed">‡∏™‡∏£‡∏∏‡∏õ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (3-5 ‡∏¢‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤)</option>
                </select>
                <button type="submit" id="summaryBtn">‡∏™‡∏£‡∏∏‡∏õ‡∏î‡πâ‡∏ß‡∏¢ AI</button>
            </form>
            <div class="summary-list" id="summaryList"></div>
        </div>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô sessionStorage (‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö Colab)
        let plans = JSON.parse(sessionStorage.getItem('bookPlans')) || [];
        let summaries = JSON.parse(sessionStorage.getItem('summaries')) || [];

        function switchTab(event, tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function renderPlans() {
            const list = document.getElementById('planList');
            list.innerHTML = '';
            plans.forEach((plan, index) => {
                const totalDays = Math.ceil(plan.pages / plan.dailyPages);
                const progress = Math.min(100, (plan.currentPage / plan.pages) * 100);

                const card = document.createElement('div');
                card.className = 'plan-card';
                card.innerHTML = `
                    <h3>${plan.title}</h3>
                    <p>üìñ ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ${plan.currentPage}/${plan.pages} | ‚è∞ ${totalDays} ‡∏ß‡∏±‡∏ô</p>
                    <div class="progress">
                        <div class="progress-bar" style="width: ${progress}%"></div>
                    </div>
                    <p>üìÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°: ${plan.startDate} | ‡∏ß‡∏±‡∏ô‡∏•‡∏∞ ${plan.dailyPages} ‡∏´‡∏ô‡πâ‡∏≤</p>
                    <div class="btn-group">
                        <button class="delete-btn" onclick="deletePlan(${index})">üóëÔ∏è ‡∏•‡∏ö</button>
                        <button class="update-btn" onclick="updateProgress(${index})">üìä ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï</button>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        function renderSummaries() {
            const list = document.getElementById('summaryList');
            list.innerHTML = '';
            summaries.forEach((summary, index) => {
                const card = document.createElement('div');
                card.className = 'summary-card';
                card.innerHTML = `
                    <h3>${summary.title}</h3>
                    <div class="summary-text">${summary.content}</div>
                    <small>üìÖ ${summary.created}</small>
                    <div class="btn-group">
                        <button class="delete-btn" onclick="deleteSummary(${index})">üóëÔ∏è ‡∏•‡∏ö</button>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        // Plan Form Submit
        document.getElementById('planForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const plan = {
                title: document.getElementById('bookTitle').value,
                pages: parseInt(document.getElementById('pages').value),
                startDate: document.getElementById('startDate').value,
                dailyPages: parseInt(document.getElementById('dailyPages').value),
                currentPage: 0,
                created: new Date().toLocaleDateString('th-TH')
            };
            plans.push(plan);
            sessionStorage.setItem('bookPlans', JSON.stringify(plans));
            renderPlans();
            e.target.reset();
            alert('‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!');
        });

        // Summary Form Submit
        document.getElementById('summaryForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('summaryBtn');
            const originalText = btn.textContent;

            btn.disabled = true;
            btn.textContent = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡∏∏‡∏õ...';

            const text = document.getElementById('contentText').value;
            const type = document.getElementById('summaryType').value;

            // AI Summary ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤
            const summary = generateSummary(text, type);

            summaries.push({
                title: `‡∏™‡∏£‡∏∏‡∏õ ${type === 'short' ? '‡∏™‡∏±‡πâ‡∏ô' : type === 'medium' ? '‡∏Å‡∏•‡∏≤‡∏á' : '‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î'}`,
                content: summary,
                created: new Date().toLocaleDateString('th-TH')
            });

            sessionStorage.setItem('summaries', JSON.stringify(summaries));
            renderSummaries();
            e.target.reset();

            btn.disabled = false;
            btn.textContent = originalText;
            alert('‚úÖ ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!');
        });

        function generateSummary(text, type) {
            const maxLength = { short: 500, medium: 1000, detailed: 1500 };
            const summaries = {
                short: `üìù **‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:**\n${text.slice(0, maxLength.short)}...\n\n‚úÖ **‡∏Ñ‡∏µ‡∏¢‡πå‡∏û‡∏≠‡∏¢‡∏ï‡πå 3 ‡∏Ç‡πâ‡∏≠:**\n1. ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏´‡∏•‡∏±‡∏Å\n2. ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á\n3. ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç`,
                medium: `üìñ **‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô:**\n\n${text.slice(0, maxLength.medium)}...\n\nüìö **‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏≠‡∏ö**`,
                detailed: `‚ú® **‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:**\n\n${text.slice(0, maxLength.detailed)}...\n\nüîç **‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:**\n‚Ä¢ **‡∏ô‡∏¥‡∏¢‡∏≤‡∏°:** ...\n‚Ä¢ **‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:** ...\n‚Ä¢ **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ...\n‚Ä¢ **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:** ...`
            };
            return summaries[type];
        }

        function deletePlan(index) {
            if (confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö?')) {
                plans.splice(index, 1);
                sessionStorage.setItem('bookPlans', JSON.stringify(plans));
                renderPlans();
            }
        }

        function deleteSummary(index) {
            if (confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö?')) {
                summaries.splice(index, 1);
                sessionStorage.setItem('summaries', JSON.stringify(summaries));
                renderSummaries();
            }
        }

        function updateProgress(index) {
            const pagesRead = prompt(`‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß?\n‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${plans[index].currentPage}/${plans[index].pages}`);
            if (pagesRead !== null && !isNaN(pagesRead) && parseInt(pagesRead) >= 0) {
                plans[index].currentPage = Math.min(parseInt(pagesRead), plans[index].pages);
                sessionStorage.setItem('bookPlans', JSON.stringify(plans));
                renderPlans();
                alert('‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!');
            }
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        renderPlans();
        renderSummaries();
        console.log('‚úÖ Colab App ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ 100%');
    </script>
</body>
</html>
